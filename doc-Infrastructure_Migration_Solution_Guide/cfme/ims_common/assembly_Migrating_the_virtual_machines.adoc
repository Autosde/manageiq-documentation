[id="Migrating_the_virtual_machines"]
= Migrating the virtual machines

Migrating the virtual machines involves the following key tasks:

. Mapping the resources of your VMware and target environments. See xref:Creating_an_infrastructure_mapping[].
. Checking for migration conditions with prerequisites. See xref:Migration_plan_prerequisites[].
. Creating and running a migration plan. See xref:Creating_a_migration_plan_in_cloudforms[].
. (Optional) You can change the maximum number of concurrent migrations per conversion host or provider for finer control of the migration process. See xref:Changing_the_maximum_number_of_concurrent_migrations[].

[id="Creating_an_infrastructure_mapping"]
== Creating an infrastructure mapping

Create an infrastructure mapping for your target environment:

* Red Hat Virtualization. See xref:Creating_an_infrastructure_mapping_for_rhv[].
* Red Hat OpenStack Platform. See xref:Creating_an_infrastructure_mapping_for_osp[].

:context: rhv
:rhv:
include::proc_Creating_an_infrastructure_mapping.adoc[leveloffset=+2]
:rhv!:
:context: osp
:osp:
include::proc_Creating_an_infrastructure_mapping.adoc[leveloffset=+2]
:osp!:

[IMPORTANT]
====
Certain prerequisites may apply to your migration. See xref:Migration_plan_prerequisites[] for specific conditions.
====

[id="Migration_plan_prerequisites"]
== Checking for migration prerequisites

Check your migration for the following conditions, which have prerequisites:

* *You are migrating previously migrated virtual machines*
+
Previously migrated machines are added to the migration plan with a CSV file. This is also recommended for large migrations. See xref:Creating_a_csv_file_to_add_virtual_machines_to_the_migration_plan[].

* *You are migrating virtual machines running RHEL or other Linux operating system*
+
RHEL/Linux virtual machines require additional configuration to preserve their IP addresses after migration. See xref:Creating_a_rhel_premigration_playbook[].

* *You are using Ansible playbooks for premigration/postmigration tasks*
+
Create an Ansible repository and add the credentials and playbooks to CloudForms. See xref:Adding_ansible_playbooks_to_cloudforms[].

If these conditions do not apply, you are ready to create a migration plan. See xref:Creating_a_migration_plan_in_cloudforms[].

include::proc_Creating_a_csv_file_to_add_virtual_machines_to_the_migration_plan.adoc[leveloffset=+2]
include::proc_Creating_a_rhel_premigration_playbook.adoc[leveloffset=+2]
include::proc_Adding_ansible_playbooks_to_cloudforms.adoc[leveloffset=+2]

include::proc_Creating_a_migration_plan_in_cloudforms.adoc[leveloffset=+1]
include::../modules/proc_Changing_the_maximum_number_of_concurrent_migrations.adoc[leveloffset=+1]
