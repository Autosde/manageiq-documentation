// Used in module: assembly_Preparing_the_environment_for_migration.adoc
[id="Preparing_the_osp_target_environment"]
= Preparing the Red Hat OpenStack Platform environment

.Procedure

include::ref_Software_compatibility_requirements.adoc[]

. Set the BIOS settings of the physical hosts for optimal performance (rather than power-saving), according to the vendor's recommendations, and disable the C1E halt state, if applicable.

. Install link:https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/director_installation_and_usage/[Red Hat OpenStack Platform] 13 or later.

. Create link:https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/networking_guide/#create_a_network[provider networks] for the target instances to preserve the IP addresses of the source virtual machines.

. Create a link:https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/users_and_identity_management_guide/#create_a_project[project] for the conversion hosts and whatever destination projects you require for the target instances.

. Ensure that the `admin` user has link:https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/users_and_identity_management_guide/#edit_a_project[`member` and `admin` roles] in the conversion and destination projects.

. Set at least one link:https://access.redhat.com/documentation/en-us/red_hat_openstack_platform/13/html-single/storage_guide/#section-volumes-advanced-vol-type[`volume type`] for the target block storage. Otherwise, CloudForms cannot detect the storage when you create the infrastructure mapping.

. Ensure that the target storage backends have sufficient space for the migrated virtual machines.

. Configure security groups with the following ports enabled:

* For the conversion hosts and CloudForms: port 22 (SSH)
* For CloudForms: port 443 (HTTPS)
+
[NOTE]
====
Outbound traffic is enabled by default. If you have changed this setting, enable ports 902 (CloudForms to VMware) and 5480 (`virt-v2v` to vCenter).
====

. Create flavors for the source virtual machines. If you do not create custom flavors, CloudForms will map each source virtual machine to an existing flavor.

. Install link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/installing_red_hat_cloudforms_on_red_hat_openstack_platform/[Red Hat CloudForms] 4.7 or later.

. Add link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/managing_providers/#vmware_vcenter_providers[VMware] and link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/managing_providers/#adding_an_openstack_infrastructure_provider[OpenStack Platform] as providers in CloudForms.
+
[NOTE]
====
Do not remove or change a provider before, during, or after migration because these actions cause errors in infrastructure mappings and migration plans.
====

. Ensure that the OpenStack Platform user (default is `cloud-user`) in CloudForms has `admin` privileges for the target projects.

. Deploy the conversion host instances using the conversion host appliance. The number of conversion hosts you deploy depends on your migration size and infrastructure. See xref:Deciding_how_many_conversion_hosts_to_create[].

.Deploying OpenStack Platform conversion host instances

. Navigate to the link:https://access.redhat.com/downloads/[Red Hat Customer Portal Product Downloads] site.
. In the *A-Z* tab, click *Red Hat OpenStack Platform*.
. Click the green *Download Latest* button to go to the OpenStack Platform download page.
. Click the *Product Software* tab and download the `RHOSP V2V Image for Red Hat OpenStack Director (x86_64)`.
+
[NOTE]
====
Always download the latest version of the OpenStack Platform conversion appliance because it contains patches and fixes.

The OpenStack Platform 14 conversion appliance can be used with OpenStack Platform 13.
====
. Upload the appliance to Glance storage.
. Deploy the appliance as a conversion host instance, with the following resources:
+
** 4 vCPUs
** 8 GB RAM
** `/tmp` (1 GB for each conversion)
** `/var/tmp` (1 GB for each conversion)
** `/var/logs` (5 GB)
+
For optimal performance:

* Deploy the conversion hosts on more than one hypervisor.
* Deploy the conversion hosts on a compute node with link:http://docs.openstack.org/developer/devstack/guides/devstack-with-nested-kvm.html[nested virtualization] enabled. Nested virtualization is a technology preview. IS THIS STILL RELEVANT?


You are ready to xref:Configuring_the_conversion_hosts[configure the conversion hosts].
