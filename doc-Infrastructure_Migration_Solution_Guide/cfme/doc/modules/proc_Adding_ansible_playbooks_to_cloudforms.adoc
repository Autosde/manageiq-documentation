// Module included in the following assemblies:
// con_Migration_plan_prerequisites.adoc
[id="Adding_ansible_playbooks_to_cloudforms"]
= Adding Ansible playbooks to CloudForms

You can add Ansible playbooks to CloudForms to perform automated premigration and postmigration tasks on specific virtual machines, for example, removing web servers from a load-balancing pool before migration and adding them back to the pool after migration.

CloudForms requires a minimum of one Ansible playbook repository, one playbook, and one set of credentials.

[id="Creating_an_Ansible_service_catalog_item"]
.Procedure

. Enable the link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.6/html/managing_providers/automation_management_providers#enabling-embedded-ansible-server-role[`Embedded Ansible` role].

. Create an link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html/managing_providers/automation_management_providers#ansible-inside[Ansible playbook repository].

. Add the link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html/managing_providers/automation_management_providers#ansible-credentials[Ansible credentials] for your virtual machines.

. Add a playbook as an link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/provisioning_virtual_machines_and_instances/#create-playbook-service-catalog-item[Ansible service catalog item].

You will xref:Advanced_options_screen[select the playbooks and the virtual machines on which they run] when you create the migration plan.
