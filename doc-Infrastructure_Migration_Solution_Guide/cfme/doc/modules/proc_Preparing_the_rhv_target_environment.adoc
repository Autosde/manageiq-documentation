// Used in module: assembly_Preparing_the_environment_for_migration.adoc
[id="Preparing_the_rhv_target_environment"]
= Preparing the Red Hat Virtualization environment

.Procedure

include::ref_Software_compatibility_requirements.adoc[]

. Set the BIOS settings of the physical hosts for optimal performance (rather than power-saving), according to the vendor's recommendations, and disable the C1E halt state, if applicable.

. Install link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.3/html-single/installation_guide/#part-Installing_the_Red_Hat_Virtualization_Manager[Red Hat Virtualization Manager] on the Manager machine.

. Install link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.3/html-single/installation_guide/#Installing_RHVH[Red Hat Virtualization Hosts] or link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.3/html-single/installation_guide/#Red_Hat_Enterprise_Linux_Hosts[Red Hat Enterprise Linux] 7.6 on the host machines.
+
Some of these hosts will be deployed as conversion hosts. The number of conversion hosts depends on your migration size and infrastructure. See xref:Deciding_how_many_conversion_hosts_to_create[].

. Enable the following https://access.redhat.com/articles/417343[ports] in the conversion host network:
* 22 - SSH
* 443 - CloudForms, Red Hat Virtualization Manager, and VDDK
* 902 - CloudForms to VMware
* 5480 - `virt-v2v` to vCenter

. Create and attach link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.3/html-single/administration_guide/#chap-Storage[data and ISO storage domains] to the data center, ensuring that the data domain has sufficient space for the migrated virtual machines.
+
[NOTE]
====
IMS only supports shared storage, such as NFS, iSCSI, or FCP. Local storage is not supported.
====

. Upload the link:https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.3/html-single/administration_guide/#Uploading_the_VirtIO_and_Guest_Tool_Image_Files_to_an_ISO_Storage_Domain[VirtIO and Guest Tool] image files to the ISO storage domain. The VirtIO file name must include the version number: +virtio-win-_version_.iso+. The Guest Tool is required for migrating Windows virtual machines.

. Install Red Hat CloudForms link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.6/html-single/installing_red_hat_cloudforms_on_red_hat_virtualization/[4.6] (with RHV 4.2.7) or link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html/installing_red_hat_cloudforms_on_red_hat_virtualization/[4.7] (with RHV 4.2.8) on the Manager machine.

. Add link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/managing_providers/#vmware_vcenter_providers[VMware] and link:https://access.redhat.com/documentation/en-us/red_hat_cloudforms/4.7/html-single/managing_providers/#red_hat_virtualization_providers[Red Hat Virtualization] as providers in CloudForms.
+
[NOTE]
====
Do not remove or change a provider (including refreshing hosts) before, during, or after migration because these actions cause errors in infrastructure mappings and migration plans.
====

You are ready to xref:Configuring_the_conversion_hosts[configure the conversion hosts].
