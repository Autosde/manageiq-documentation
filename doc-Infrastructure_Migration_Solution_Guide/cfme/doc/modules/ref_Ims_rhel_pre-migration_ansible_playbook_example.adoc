[id="Ims_rhel_pre-migration_ansible_playbook_example"]
= IMS RHEL Pre-migration Ansible Playbook Example

The `ims.rhel_pre_migration` role configures a target Red Hat Enterprise Linux virtual machine for migration by performing the following tasks:

* Persisting network interface names with `udev` rules
* Installing the RHV guest agent

This example registers a virtual machine with a Satellite 6 server and enables the `rhel-7-server-rpms` repository. If no  link:https://galaxy.ansible.com/fdupont_redhat/ims_rhel_pre_migration[variables] are provided, the playbook assumes that the repositories are already configured and installs the RHV guest agent.

[options="nowrap" subs="+quotes,verbatim"]
----
---
- hosts: _all_
  vars:
    rhsm_config:
      server_hostname: "_satellite.example.com_"
      server_username: "_admin_"
      server_password: "_password_"
      org_id: "_organization_"
    rhsm_repositories:
      - "rhel-7-server-rpms"
  roles:
    - role: ims.rhel_pre_migration
----
