[[Adding_VMware_provider_to_CloudForms]]
=== Adding VMware Provider to CloudForms

After you have installed CloudForms, you must add a VMware vCenter provider:

. Navigate to menu:Compute[Infrastructure > Providers].
. Click  image:1847.png[Configuration] (*Configuration*), then click image:1862.png[Add a New Infrastructure Provider] (*Add a New Infrastructure Provider*). 
. Enter the *Name* of the provider to add. The *Name* is how the device is labeled in the console.
. Select *VMware vCenter* from the *Type* list.
. Enter the *Host Name or IP address(IPv4 or IPv6)* of the provider.
+
[IMPORTANT]
====
The *Host Name* must use a unique fully qualified domain name.
====
+
. Select the appropriate *Zone* for the provider.
  By default, the zone is set to *default*.
. In the *Credentials* area, under *Default*, provide the login credentials required for the VMware vCenter administrative user:
* Enter the user name in the *Username* field.
* Enter the password in the *Password* field.
* Confirm the password in the *Confirm Password* field.
* Click *Validate* to confirm CloudForms can connect to the VMware vCenter.
. Click *Add*.

*Using a Non-Administrator Account for vCenter Hosts*

After adding a VMware vCenter infrastructure provider, you must authenticate its hosts to enable full functionality. You can use administrator credentials, or create another user assigned to a role created for CloudForms. See the https://www.vmware.com/support/pubs/vsphere-esxi-vcenter-server-pubs.html[VMware documentation] for instructions on how to create a role.

The following privileges should be enabled for the non-administrator user:

From the Global group, check:

* Cancel task
* Diagnostics
* Log Event
* Set custom attribute
* Settings

Check the entire set of privileges for the following groups:

* Alarms
* Datastores
* dvPort Group
* Host
* Network
* Resource
* Scheduled Task
* Tasks
* Virtual Machine
* vSphere Distributed Switch

Additionally, you must assign the new role to the following objects:

* *Datacenter*: At the Datacenter the CloudForms user/group must have at least the read-only role at the Datacenter level (Not Propagated) to be able to see the datacenter. Without this access, relationships cannot be made. Specifically, the datastores will not show up.
* *Cluster*: Each Cluster that CloudForms needs access to must have the new role assigned and propagated.
* *Folders*: Each Folder that CloudForms needs access to must have the new role assigned and propagated.
* *Datastores*: Each Datastore that CloudForms needs access to must have the new role assigned and propagated.
* *Networking*: Each vLAN or Port Group that CloudForms needs access to must have the new role assigned and propagated.


*Authenticating VMware vCenter Hosts*

The procedure below describes how to authenticate the VMware vCenter hosts. 

. Navigate to menu:Compute[Infrastructure > Providers]. 
. Click on a provider to display its summary screen. 
. On the summary screen, click *Hosts* in the *Relationships* information box to display the hosts on that provider. 
. Select the hosts to authenticate.
  You can select all hosts using the *Check All* option. 
. Click  image:1847.png[Configuration] (*Configuration*)			
. Click  image:1851.png[Edit Selected items] (*Edit Selected items*).
. In the *Credentials* area, under *Default*, provide the VMware ESXi login credentials:
* Enter the user name in the *Username* field. 
* Enter the password in the *Password* field. 
* Confirm the password in the *Confirm Password* field. 
* Click *Validate* to confirm CloudForms can connect to the VMware vCenter host. 
. If editing multiple hosts, select a host from the *Select Host to validate against* list; provide the VMware ESXi login credentials and click *Validate*.
. Click *Save*.

